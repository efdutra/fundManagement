(function(e){function t(t){for(var n,i,o=t[0],c=t[1],u=t[2],l=0,p=[];l<o.length;l++)i=o[l],a[i]&&p.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("64a9"),a=r.n(n);a.a},"2c1a":function(e,t,r){},"4c06":function(e,t,r){"use strict";var n=r("2c1a"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex align-content-stretch flex-wrap align-items-stretch",attrs:{id:"app"}},[r("card",{attrs:{idUser:"7",usr:"industria1@yh-funds-management-api.com",pass:"yandeh@2019"}}),r("card",{attrs:{idUser:"9",usr:"industria2@yh-funds-management-api.com",pass:"yandeh@2019"}}),r("card",{attrs:{idUser:"13",usr:"investimentoyandeh@yh-funds-management-api.com",pass:"yandeh@2019"}}),r("card",{attrs:{idUser:"10",usr:"mercado1@yh-funds-management-api.com",pass:"yandeh@2019"}}),r("card",{attrs:{idUser:"12",usr:"mercado2@yh-funds-management-api.com",pass:"yandeh@2019"}}),r("card",{attrs:{idUser:"11",usr:"mercado3@yh-funds-management-api.com",pass:"yandeh@2019"}}),r("card",{attrs:{idUser:"15",usr:"funcionario1@yh-funds-management-api.com",pass:"yandeh@2019"}}),r("card",{attrs:{idUser:"14",usr:"funcionario2@yh-funds-management-api.com",pass:"yandeh@2019"}}),r("card",{attrs:{idUser:"16",usr:"funcionario3@yh-funds-management-api.com",pass:"yandeh@2019"}})],1)},s=[],i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.users.length>0?r("div",{staticClass:"wrapper"},[r("header",[e.users.length>0?r("h1",[e._v(e._s(e.actualUser.username))]):e._e(),r("select",{directives:[{name:"model",rawName:"v-model",value:e.idUserProp,expression:"idUserProp"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.idUserProp=t.target.multiple?r:r[0]}}},e._l(e.users,function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.username))])}),0)]),r("div",{attrs:{id:"create"}},[r("hr"),r("h2",[e._v("Criar Crédito")]),r("form",{attrs:{action:""}},[r("label",{attrs:{for:"nome"}},[e._v("Nome:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.createName,expression:"createName"}],attrs:{name:"nome",type:"text",placeholder:"Digite aqui o nome do seed"},domProps:{value:e.createName},on:{input:[function(t){t.target.composing||(e.createName=t.target.value)},function(t){return e.getName(t.target.value)}]}}),r("br"),r("label",{attrs:{for:"tipo"}},[e._v("Tipo:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",id:"reais",name:"tipo",value:"MONETARY"},domProps:{checked:e._q(e.type,"MONETARY")},on:{change:function(t){e.type="MONETARY"}}}),r("label",{attrs:{for:"reais"}},[e._v("Reais (R$)")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"type"}],attrs:{type:"radio",id:"promo",name:"tipo",value:"PROMOTIONAL"},domProps:{checked:e._q(e.type,"PROMOTIONAL")},on:{change:function(t){e.type="PROMOTIONAL"}}}),r("label",{attrs:{for:"promo"}},[e._v("Pontos")]),r("br"),r("label",{attrs:{for:"valor"}},[e._v("Valor:")]),"MONETARY"==e.type?r("vue-autonumeric",{attrs:{options:{digitGroupSeparator:".",decimalCharacter:",",decimalCharacterAlternative:".",currencySymbol:"R$"},placeholder:"Digite o valor"},model:{value:e.createVal,callback:function(t){e.createVal=t},expression:"createVal"}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.createVal,expression:"createVal"}],attrs:{name:"valor",type:"number",step:"1",onkeypress:"return event.charCode >= 48 && event.charCode <= 57",placeholder:"Digite o valor"},domProps:{value:e.createVal},on:{input:function(t){t.target.composing||(e.createVal=t.target.value)}}}),r("br"),r("button",{on:{click:e.createSeed}},[e._v("Criar")])],1)]),Object.keys(e.actualUser).length>0?[Object.keys(e.actualUser.seeds).length>0&&e.seeds.length>0?r("div",{attrs:{id:"frac"}},[r("hr"),r("h2",[e._v("Transferir Crédito")]),r("form",{attrs:{action:""}},[r("label",{attrs:{for:"seed"}},[e._v("Crédito:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.fracIdCamp,expression:"fracIdCamp"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.fracIdCamp=t.target.multiple?r:r[0]}}},e._l(e.actualUser.seeds,function(t){return t.emitterId==e.idUserProp||t.ownerId==e.idUserProp?r("option",{domProps:{value:t.docId}},[e._v(e._s(t.description))]):e._e()}),0),r("br"),r("label",{attrs:{for:"dest"}},[e._v("Destino:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.fracIdUser,expression:"fracIdUser"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.fracIdUser=t.target.multiple?r:r[0]}}},e._l(e.users,function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.username))])}),0),r("br"),r("label",{attrs:{for:"valor"}},[e._v("Valor:")]),"MONETARY"==e.actualUser.seeds.find(function(t){return t.docId==e.fracIdCamp}).type?r("vue-autonumeric",{attrs:{options:{digitGroupSeparator:".",decimalCharacter:",",decimalCharacterAlternative:".",currencySymbol:"R$"},placeholder:"Digite o valor"},model:{value:e.fracValue,callback:function(t){e.fracValue=t},expression:"fracValue"}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.fracValue,expression:"fracValue"}],attrs:{name:"valor",type:"number",step:"1",onkeypress:"return event.charCode >= 48 && event.charCode <= 57",placeholder:"Digite o valor"},domProps:{value:e.fracValue},on:{input:function(t){t.target.composing||(e.fracValue=t.target.value)}}}),r("br"),r("button",{on:{click:function(t){return t.preventDefault(),e.fracSeed(t)}}},[e._v("Transferir")])],1)]):e._e(),e.actualUser.seeds.length>0&&e.seeds.length>0?r("div",{attrs:{id:"saldo"}},[r("hr"),r("h2",[e._v("Saldo")]),r("label",{attrs:{for:"seed"}},[e._v("Selecione o Crédito:")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.frac,expression:"frac"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.frac=t.target.multiple?r:r[0]}}},e._l(e.actualUser.seeds,function(t){return r("option",{domProps:{value:t.docId}},[e._v(e._s(t.description))])}),0),r("div",{staticClass:"results"},[e.actualUser.seeds.find(function(e){return 1==e.created})||e.actualUser.seeds.find(function(e){return e.value!=e.balance})?r("div",{staticClass:"valores"},[r("h4",[e._v("Total do Crédito:")]),r("span",[e._v(e._s(parseFloat(e.actualUser.seeds.find(function(t){return t.docId==e.frac}).value).toLocaleString("pt-BR","PROMOTIONAL"==e.actualUser.seeds.find(function(t){return t.docId==e.frac}).type?{}:{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2})))]),"PROMOTIONAL"==e.actualUser.seeds.find(function(t){return t.docId==e.frac}).type?r("span",[e._v(" Pontos")]):e._e()]):e._e(),r("div",{staticClass:"valores"},[r("h4",[e._v(e._s(e.actualUser.seeds.find(function(e){return 1==e.created})||e.actualUser.seeds.find(function(e){return 1==e.value})?"Parcial do Crédito:":"Total do Crédito:"))]),r("span",[e._v(e._s(parseFloat(e.actualUser.seeds.find(function(t){return t.docId==e.frac}).balance).toLocaleString("pt-BR","PROMOTIONAL"==e.actualUser.seeds.find(function(t){return t.docId==e.frac}).type?{}:{style:"currency",currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2})))]),"PROMOTIONAL"==e.actualUser.seeds.find(function(t){return t.docId==e.frac}).type?r("span",[e._v(" Pontos")]):e._e()]),r("br")])]):e._e(),e.actualUser.seeds.length>0&&e.actualUser.seeds.find(function(e){return e.balance})?r("div",{attrs:{id:"cashout"}},[r("hr"),r("h2",[e._v("Usar Crédito")]),"MONETARY"==e.actualUser.seeds.find(function(t){return t.docId==e.frac}).type?r("vue-autonumeric",{attrs:{options:{digitGroupSeparator:".",decimalCharacter:",",decimalCharacterAlternative:".",currencySymbol:"R$"},placeholder:"Digite o valor"},model:{value:e.cashValue,callback:function(t){e.cashValue=t},expression:"cashValue"}}):r("input",{directives:[{name:"model",rawName:"v-model",value:e.cashValue,expression:"cashValue"}],attrs:{name:"valor",type:"number",step:"1",onkeypress:"return event.charCode >= 48 && event.charCode <= 57",placeholder:"Digite o valor"},domProps:{value:e.cashValue},on:{input:function(t){t.target.composing||(e.cashValue=t.target.value)}}}),r("br"),r("button",{on:{click:function(t){return t.preventDefault(),e.cashout(t)}}},[e._v("Usar")])],1):e._e()]:e._e()],2):e._e()},o=[],c=(r("b54a"),r("c5f6"),r("ac6a"),r("55dd"),r("96cf"),r("3b8d")),u=(r("7514"),r("e543")),d=r.n(u),l={name:"card",props:["idUser","usr","pass"],components:{VueAutonumeric:d.a},data:function(){return{token:"https://sso-dev.yandeh.com.br/auth/realms/YandehDev/protocol/openid-connect/token",apiUsers:"https://yh-funds-management-api-dev.devyandeh.com.br/api/v1/users",apiSeeds:"https://yh-funds-management-api-dev.devyandeh.com.br/api/v1/seeds",apiDocs:"https://yh-funds-management-api-dev.devyandeh.com.br/api/v1/documents",idUserProp:"",seeds:[],users:[],docs:[],actualUser:"",fracIdCamp:"",fracIdUser:"",fracValue:"",message:"",price:"",type:"",frac:"",createVal:"",createName:"",myValue:"",resToken:""}},watch:{idUserProp:function(e){this.users.length>0&&(this.mountObj(),this.actualUser=this.users.find(function(t){return t.id==e}),this.fracIdCamp=this.actualUser.seeds.length>0?this.actualUser.seeds[0].docId:"--",this.fracIdUser=this.users.filter(function(t){return t.id!=e})[0].id,this.frac=this.actualUser.seeds.length>0?this.actualUser.seeds[0].docId:"--",console.log(this.actualUser))}},methods:{reloadAllCards:function(){this.$root.$emit("reloadCards")},loadValues:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r=this,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.idUser,n.length>1&&void 0!==n[1]&&n[1],e.next=4,fetch(this.token,{method:"POST",headers:{"Content-type":"application/x-www-form-urlencoded"},body:"grant_type=password&scope=openid&client_id=yh-funds-management-api&client_secret=e78a874f-d70e-410d-93a9-3656d546ea78&username="+this.usr+"&password="+this.pass}).then(function(e){return e.json()}).then(function(e){r.resToken="Bearer "+e.access_token}).catch(function(e){return console.log(e)});case 4:return e.next=6,fetch(this.apiUsers,{method:"GET",headers:{Accept:"application/json","Content-type":"application/json",Authorization:this.resToken}}).then(function(e){return e.json()}).then(function(e){r.users=e.content.sort(function(e,t){var r=e.id<t.id?-1:1;return r}),console.log("USERS: ",r.users)});case 6:return e.next=8,fetch(this.apiSeeds+"?size=2000",{method:"GET",headers:{Accept:"application/json","Content-type":"application/json",Authorization:this.resToken}}).then(function(e){return e.json()}).then(function(e){r.seeds=e.content.sort(function(e,t){var r=e.id<t.id?-1:1;return r}),console.log("SEEDS: ",r.seeds)});case 8:return e.next=10,fetch(this.apiDocs+"?size=2000",{method:"GET",headers:{Accept:"application/json","Content-type":"application/json",Authorization:this.resToken}}).then(function(e){return e.json()}).then(function(e){r.docs=e.content.sort(function(e,t){var r=e.id<t.id?-1:1;return r}),console.log("DOCS: ",r.docs)});case 10:this.idUserProp=t,this.users.length>0&&(this.mountObj(),this.actualUser=this.users.find(function(e){return e.id==r.idUserProp}),this.fracIdCamp=this.actualUser.seeds.length>0?this.actualUser.seeds[0].docId:"--",this.fracIdUser=this.users.filter(function(e){return e.id!=r.idUserProp})[0].id,this.frac=this.actualUser.seeds.length>0?this.actualUser.seeds[0].docId:"--"),this.fracValue="",this.createVal="",this.cashValue="",this.createName="",this.type="",this.mountObj(),this.actualUser.seeds.sort(function(e,t){var r=e.id<t.id?-1:1;return r}),console.log(this.actualUser);case 20:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mountObj:function(){var e=this;this.users.forEach(function(t){t["seeds"]=[],t.id==e.idUserProp&&e.docs.filter(function(t){return t.ownerId==e.idUserProp}).forEach(function(r){t["seeds"].push({description:e.seeds.find(function(e){return e.id==r.seedId}).description,id:r.seedId,docId:r.id,type:e.seeds.find(function(e){return e.id==r.seedId}).type,value:r.value,balance:r.balance,emitterId:r.emitterId,ownerId:e.idUserProp,created:!r.parentId})})})},init:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.idUserProp=this.idUser,e.next=3,this.loadValues();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getName:function(e){this.message=e},getPrice:function(e){this.price=e},getUniqueIds:function(e){var t=e,r=[];return[t].forEach(function(e){return function(t){return t.forEach(function(t){e[t.seed_id||t.participated_seeds_id]||(e[t.seed_id||t.participated_seeds_id]={},r.push(e[t.seed_id||t.participated_seeds_id])),Object.assign(e[t.seed_id||t.participated_seeds_id],t)})}}(Object.create(null))),r},createSeed:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.preventDefault(),r={description:this.message,type:this.type,value:Number("PROMOTIONAL"==this.type?parseInt(this.createVal):this.createVal)},e.next=4,fetch(this.apiSeeds,{method:"POST",body:JSON.stringify(r),headers:new Headers({Authorization:this.resToken,Accept:"application/json","Content-Type":"application/json"})}).then(function(e){alert("Gerou Seed!"),console.log("gravou seed ==> ",e)});case 4:return e.next=6,this.reloadAllCards();case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),fracSeed:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var r,n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r={fractions:[{username:this.users.find(function(e){return e.id==a.fracIdUser}).username,value:Number("PROMOTIONAL"==this.actualUser.seeds.find(function(e){return e.docId==a.fracIdCamp}).type?parseInt(this.fracValue):this.fracValue)}]},n=this.docs.find(function(e){return e.id==a.fracIdCamp}).id,e.next=4,fetch(this.apiDocs+"/"+n+"/fractionate",{method:"POST",body:JSON.stringify(r),headers:new Headers({Authorization:this.resToken,Accept:"application/json","Content-Type":"application/json"})}).then(function(e){alert("Gerou Document Fração"),console.log("Fracionou Document ==> ",e)}).catch(function(e){return console.log(e)});case 4:return e.next=6,this.reloadAllCards();case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),cashout:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var r,n,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=this.docs.find(function(e){return e.content[0].id==s.frac})._id,n=this.docs.find(function(e){return e.content[0].id==s.frac}).content[0].balance,a={content:[{active:!0,id:this.docs.find(function(e){return e.content[0].id==s.frac}).content[0].id,seedId:this.docs.find(function(e){return e.content[0].id==s.frac}).content[0].seedId,parentId:this.docs.find(function(e){return e.content[0].id==s.frac}).content[0].parentId,emitterId:this.docs.find(function(e){return e.content[0].id==s.frac}).content[0].emitterId,ownerId:this.docs.find(function(e){return e.content[0].id==s.frac}).content[0].ownerId,status:"UNSUED",value:this.docs.find(function(e){return e.content[0].id==s.frac}).content[0].value,balance:n-("PROMOTIONAL"==this.actualUser.seeds.find(function(e){return e.docId==s.frac}).type?parseInt(this.cashValue):this.cashValue),link:this.docs.find(function(e){return e.content[0].id==s.frac}).content[0].link}]},e.next=5,fetch(this.aDocUrl+"/"+r.$oid+this.apiKey,{method:"PUT",body:JSON.stringify(a),headers:new Headers({"content-type":"application/json"})}).then(function(e){alert("Feito Cashout")});case 5:return e.next=7,this.reloadAllCards();case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.$root.$on("reloadCards",Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadValues(e.idUserProp,!0);case 2:case"end":return t.stop()}},t)}))),this.init()}},p=l,f=(r("4c06"),r("2877")),h=Object(f["a"])(p,i,o,!1,null,"6021a568",null),m=h.exports,v={name:"app",components:{card:m}},y=v,g=(r("034f"),Object(f["a"])(y,a,s,!1,null,null,null)),_=g.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(_)}}).$mount("#app")},"64a9":function(e,t,r){}});
//# sourceMappingURL=app.b8be5d3a.js.map